<!DOCTYPE html>
<html>
  <head>
    <title>My App</title>
    <script>
      //Initialise modules
      var serialport = require('serialport');
    </script>
  </head>
  <body>
    <div id="app"></div>
    <script src="./app.js" data-container="#app"></script>
    <script>
      if (process.env.BROWSER_SYNC_CLIENT_URL) {
        const current = document.currentScript;
        const script = document.createElement('script');
        script.src = process.env.BROWSER_SYNC_CLIENT_URL;
        script.async = true;
        current.parentNode.insertBefore(script, current);
      }

      //Print out ports to dev console
      serialport.list((err, ports) => {
        for (var i = 0; i < ports.length; i++) {
          console.log(ports[i].comName);
        }
      });

      var port = new serialport('/dev/ttyACM0', { autoOpen: true, baudRate : 115200 });
      port.write('test\n', function(err) {
        if (err) {
          console.log(err);
          return;
        }
        console.log("Message written");
      });

    </script>
  </body>
</html>
